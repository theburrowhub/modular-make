# Test Makefile

# Include centralized color definitions
-include ../.make/colors.mk

# Default values
TEST_DIR ?= ./tests
COVERAGE_THRESHOLD ?= 80

##? Examples:
# make test                             # Run all tests
# make lint                             # Run code quality checks
# make unit                             # Run unit tests only
# make coverage COVERAGE_THRESHOLD=90   # Generate coverage with 90% threshold

test: ##! Run all tests
	@echo "${BLUE}ğŸ§ª Running all tests...${NC}"
	@echo "[Running unit tests...]"
	@echo "[Running integration tests...]"
	@echo "${GREEN}âœ… All tests passed!${NC}"

lint: ##! Run code linters
	@echo "${BLUE}ğŸ” Running linters...${NC}"
	@echo "[Checking code style...]"
	@echo "[Running ESLint/Pylint/Golint...]"
	@echo "${GREEN}âœ… Code quality checks passed!${NC}"

unit: ## Run unit tests only
	@echo "${CYAN}ğŸ”¬ Running unit tests...${NC}"
	@echo "[pytest tests/unit/ or npm test:unit]"
	@echo "${GREEN}âœ… Unit tests completed!${NC}"

integration: ## Run integration tests
	@echo "${CYAN}ğŸ”— Running integration tests...${NC}"
	@echo "[pytest tests/integration/ or npm test:integration]"
	@echo "${GREEN}âœ… Integration tests completed!${NC}"

coverage: ## Generate test coverage report
	@echo "${BLUE}ğŸ“Š Generating coverage report...${NC}"
	@echo "  Threshold: ${GREEN}$(COVERAGE_THRESHOLD)%${NC}"
	@echo ""
	@echo "[Running tests with coverage...]"
	@echo "[Coverage: 85.2%]"
	@echo "${GREEN}âœ… Coverage report generated!${NC}"

.PHONY: test lint unit integration coverage
